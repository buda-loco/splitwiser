---
phase: 10-ios-native-ux-layer
plan: 03
type: execute
depends_on: []
files_modified: [components/ListRow.tsx, components/ExpenseList.tsx, components/SettlementHistory.tsx, app/settings/page.tsx]
---

<objective>
Create standardized iOS-style list row component with chevrons and tap states.

Purpose: Establish consistent iOS list patterns across all list views (expenses, settlements, settings), replacing ad-hoc implementations with a reusable component.
Output: ListRow component, refactored existing lists to use it.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@components/ExpenseList.tsx
@components/SettlementHistory.tsx
@app/settings/page.tsx

**Tech stack available:** Framer Motion 12.33.0, Next.js 15, React 19
**Established patterns:** Framer Motion whileTap animations, iOS color tokens, dark mode support
**Constraining decisions:**
- Beautiful UX as core value - list rows must have satisfying tap feedback
- Existing lists have various implementations - unify them

**What exists:**
- ExpenseList has expense cards with date, description, amount
- SettlementHistory has settlement items
- Settings page likely has simple list items
- Various styling approaches across these lists
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ListRow component with iOS styling</name>
  <files>components/ListRow.tsx</files>
  <action>
Create reusable ListRow component following iOS design patterns:

**Props interface:**
- title: string (primary text, left-aligned, font-semibold)
- subtitle?: string (secondary text below title, ios-gray, text-sm)
- value?: string | ReactNode (right-aligned value, can be text or custom element)
- leftIcon?: ReactNode (optional icon/emoji on left)
- showChevron?: boolean (show right chevron, default: false)
- onClick?: () => void (tap handler, makes row tappable)
- href?: string (Next.js Link href, alternative to onClick)
- className?: string (additional classes)

**Visual design:**
- White background (dark:bg-gray-800)
- Horizontal padding: px-4
- Vertical padding: py-3
- Border bottom: border-b border-gray-200 (dark:border-gray-700)
- Active state: Framer Motion whileTap scale: 0.98, opacity: 0.7
- Chevron: "›" character in ios-gray, text-xl, right-aligned

**Layout:**
- Flexbox: flex items-center justify-between
- Left section: leftIcon (if present) + title/subtitle stack
- Right section: value + chevron (if enabled)
- Subtitle stacked below title (flex flex-col gap-1)

**Interaction:**
- If onClick provided: cursor-pointer, tap animation
- If href provided: use Next.js Link wrapper, tap animation
- If neither: no interaction styling
- Tap scale animation with spring physics (stiffness: 400, damping: 17)

**Avoid:**
- Do NOT make rows full-width by default (parent controls width)
- Do NOT add top-level rounded corners (lists are flat on iOS)
- Do NOT use custom chevron SVGs (use simple "›" character)
- Do NOT override text truncation (let parent control with line-clamp if needed)
</action>
  <verify>TypeScript compiles, ListRow component exports, renders with all prop combinations</verify>
  <done>ListRow component exists with iOS styling, chevron option, tap states, Link support.</done>
</task>

<task type="auto">
  <name>Task 2: Refactor ExpenseList to use ListRow</name>
  <files>components/ExpenseList.tsx</files>
  <action>
Update ExpenseList to use ListRow component for each expense item:

**Current structure:**
ExpenseList maps expenses to cards/list items with custom styling.

**Changes:**
- Import ListRow
- For each expense, render:
  ```tsx
  &lt;ListRow
    title={expense.description}
    subtitle={formatDate(expense.expense_date)}
    value={formatCurrency(expense.amount, expense.currency)}
    showChevron={true}
    onClick={() => router.push(`/expenses/${expense.id}`)}
  /&gt;
  ```
- Remove custom motion.div wrappers (ListRow handles animations)
- Keep container styling (rounded-lg shadow-sm bg-white)
- Keep filter tabs at top
- Keep loading/empty states

**Preserve:**
- Filter functionality (tags, dates)
- Loading skeleton
- Empty state message
- Dark mode support

**Result:**
ExpenseList should be simpler, using ListRow for consistent styling.
</action>
  <verify>ExpenseList renders correctly, tap navigation works, animations preserved</verify>
  <done>ExpenseList uses ListRow, code is cleaner, functionality preserved.</done>
</task>

<task type="auto">
  <name>Task 3: Refactor SettlementHistory to use ListRow</name>
  <files>components/SettlementHistory.tsx, app/settings/page.tsx</files>
  <action>
Update SettlementHistory and settings page to use ListRow:

**SettlementHistory:**
- Map each settlement to:
  ```tsx
  &lt;ListRow
    title={`Settled with ${settlement.participant_name}`}
    subtitle={formatDate(settlement.settlement_date)}
    value={formatCurrency(settlement.amount, settlement.currency)}
    showChevron={false}
  /&gt;
  ```
- Keep container styling and empty state

**Settings page:**
- Likely has navigation items like "Account", "Privacy", "About"
- Convert to ListRow with showChevron={true} and href props
- Example:
  ```tsx
  &lt;ListRow title="Account Settings" showChevron={true} href="/settings/account" /&gt;
  &lt;ListRow title="Privacy" showChevron={true} href="/settings/privacy" /&gt;
  ```

**Keep:**
- All existing functionality
- Dark mode support
- Current routing

**Result:**
Consistent iOS list styling across all list views in the app.
</action>
  <verify>SettlementHistory and settings page render correctly, navigation works, styling consistent</verify>
  <done>All list views use ListRow component, consistent iOS styling throughout app.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without TypeScript errors
- [ ] ListRow component properly typed and exported
- [ ] ExpenseList uses ListRow and works correctly
- [ ] SettlementHistory uses ListRow
- [ ] Settings page uses ListRow for navigation
- [ ] Tap animations work consistently
- [ ] Chevrons appear where expected
- [ ] Dark mode works correctly
</verification>

<success_criteria>
- ListRow component created with full iOS styling
- ExpenseList, SettlementHistory, and settings refactored
- Consistent list patterns across app
- No TypeScript errors
- All navigation and interactions preserved
</success_criteria>

<output>
After completion, create `.planning/phases/10-ios-native-ux-layer/10-03-SUMMARY.md`:

# Phase 10 Plan 3: iOS List Components Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `components/ListRow.tsx` - Description
- `components/ExpenseList.tsx` - Description
- `components/SettlementHistory.tsx` - Description
- `app/settings/page.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for parallel execution with 10-02, 10-04, 10-05 (independent features)
</output>
