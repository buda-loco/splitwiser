---
phase: 10-ios-native-ux-layer
plan: 04
type: execute
depends_on: []
files_modified: [tailwind.config.ts, app/globals.css]
---

<objective>
Complete dark mode implementation with full iOS dark palette and system integration.

Purpose: Extend basic dark mode to comprehensive iOS dark design system with proper dark colors for all UI states and components.
Output: Complete dark mode color system, refined dark mode styles.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@tailwind.config.ts
@app/globals.css

**Tech stack available:** Tailwind CSS with dark mode via prefers-color-scheme
**Established patterns:** iOS color tokens (ios-blue, ios-gray, etc.), dark: prefix for dark mode styles
**Constraining decisions:**
- Beautiful UX as core value - dark mode must be polished, not an afterthought
- Already have 293 dark mode usages across components

**What exists:**
- Basic dark mode: body bg-black text-white in globals.css
- iOS color palette in tailwind.config (blue, green, red, gray scales)
- Many components already have dark: prefixes (293 instances)
- prefers-color-scheme detection working
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand iOS color palette with dark variants</name>
  <files>tailwind.config.ts</files>
  <action>
Extend the iOS color palette with proper dark mode variants following iOS design guidelines:

**Add to tailwind.config.ts colors.ios:**

Current colors remain (these work in both modes):
- blue: "#007AFF"
- green: "#34C759"
- red: "#FF3B30"
- gray: "#8E8E93" (for light mode secondary text)

**Add dark mode specific grays:**
- darkGray: "#1C1C1E" (elevated surfaces)
- darkGray2: "#2C2C2E" (cards, grouped backgrounds)
- darkGray3: "#3A3A3C" (tertiary backgrounds)
- darkGray4: "#48484A" (borders, separators)
- darkGray5: "#636366" (secondary text)
- darkGray6: "#8E8E93" (tertiary text, matches light gray)

**Add semantic color mappings** (CSS variables approach):
```typescript
colors: {
  ios: {
    // ... existing colors
    surface: {
      DEFAULT: '#FFFFFF',
      dark: '#1C1C1E',
    },
    card: {
      DEFAULT: '#F2F2F7',
      dark: '#2C2C2E',
    },
    border: {
      DEFAULT: '#C7C7CC',
      dark: '#48484A',
    },
    text: {
      primary: {
        DEFAULT: '#000000',
        dark: '#FFFFFF',
      },
      secondary: {
        DEFAULT: '#8E8E93',
        dark: '#8E8E93',
      },
    }
  }
}
```

**Why semantic naming:**
Components can use bg-ios-surface and Tailwind dark: mode will automatically apply correct color. Cleaner than dark:bg-ios-darkGray everywhere.

**Avoid:**
- Do NOT change existing color values (components already use them)
- Do NOT remove gray scales (still needed for light mode)
- Do NOT use opaque overlays for dark mode (use proper dark colors)
</action>
  <verify>tailwind.config.ts syntax valid, npm run build succeeds</verify>
  <done>iOS color palette extended with dark variants and semantic mappings.</done>
</task>

<task type="auto">
  <name>Task 2: Refine globals.css dark mode styles</name>
  <files>app/globals.css</files>
  <action>
Update global dark mode styles to use proper iOS dark palette:

**Current dark mode:**
```css
@media (prefers-color-scheme: dark) {
  body {
    @apply bg-black text-white;
  }
}
```

**Enhanced dark mode:**
```css
@media (prefers-color-scheme: dark) {
  body {
    @apply bg-[#000000] text-white;
  }

  /* Ensure smooth color transitions */
  * {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-duration: 0.2s;
    transition-timing-function: ease-in-out;
  }

  /* Respect prefers-reduced-motion */
  @media (prefers-reduced-motion: reduce) {
    * {
      transition-duration: 0ms;
    }
  }

  /* Improve form inputs in dark mode */
  input, textarea, select {
    @apply bg-ios-darkGray2 border-ios-darkGray4 text-white;
  }

  input::placeholder, textarea::placeholder {
    @apply text-ios-darkGray5;
  }
}
```

**Goals:**
- Smooth transitions when system theme changes
- Respect accessibility (prefers-reduced-motion)
- Better form styling in dark mode
- True black background (#000000) for OLED screens

**Keep:**
- Existing light mode styles
- -webkit-tap-highlight-color: transparent
- Font stack configuration
</action>
  <verify>globals.css syntax valid, dark mode renders with smooth transitions</verify>
  <done>Global dark mode styles refined with transitions, form improvements, OLED black.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Tailwind config has dark color variants
- [ ] Dark mode transitions smoothly between themes
- [ ] Forms render correctly in dark mode
- [ ] OLED black background in dark mode
- [ ] All existing dark: styles still work
</verification>

<success_criteria>
- Complete iOS dark color palette in Tailwind config
- Refined global dark mode styles
- Smooth theme transitions
- No TypeScript or build errors
- Better dark mode experience throughout app
</success_criteria>

<output>
After completion, create `.planning/phases/10-ios-native-ux-layer/10-04-SUMMARY.md`:

# Phase 10 Plan 4: Dark Mode Polish Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `tailwind.config.ts` - Description
- `app/globals.css` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for parallel execution with 10-02, 10-03, 10-05 (independent features)
</output>
