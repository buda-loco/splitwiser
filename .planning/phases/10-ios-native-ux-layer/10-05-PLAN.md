---
phase: 10-ios-native-ux-layer
plan: 05
type: execute
depends_on: [10-01, 10-02, 10-03]
files_modified: [components/ExpenseList.tsx, components/BalanceView.tsx, components/TagInput.tsx, components/BottomNav.tsx, components/ExpenseForm.tsx]
---

<objective>
Polish animations and micro-interactions across all components for refined iOS feel.

Purpose: Add finishing touches to component animations, ensuring every interaction feels smooth, responsive, and delightful like native iOS.
Output: Enhanced animations, refined micro-interactions, polished component behaviors.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-ios-native-ux-layer/10-01-SUMMARY.md
@.planning/phases/10-ios-native-ux-layer/10-02-SUMMARY.md
@.planning/phases/10-ios-native-ux-layer/10-03-SUMMARY.md
@components/ExpenseList.tsx
@components/BalanceView.tsx
@components/TagInput.tsx
@components/BottomNav.tsx
@components/ExpenseForm.tsx

**Tech stack available:** Framer Motion 12.33.0, iOS design system
**Established patterns:** whileTap animations, spring physics, iOS timing
**Constraining decisions:**
- Beautiful UX as core value - this is the polish phase that makes it shine
- Plans 10-01, 10-02, 10-03 must complete first (new components to polish)

**What exists:**
- Sheet component with drag gestures (from 10-01)
- SwipeNavigation component (from 10-02)
- ListRow component (from 10-03)
- Various components with basic animations
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance list animations and loading states</name>
  <files>components/ExpenseList.tsx, components/BalanceView.tsx</files>
  <action>
Add staggered list animations and refined loading states:

**ExpenseList enhancements:**
- Wrap list in Framer Motion AnimatePresence
- Stagger animation for list items: delayChildren: 0.1, staggerChildren: 0.05
- Each ListRow gets layout animation: layout="position" for smooth reordering
- Initial mount: fade + slide up (y: 20 → 0, opacity: 0 → 1)
- Loading skeleton: Add pulse animation with gradient shimmer effect
- Empty state: Fade in with slight bounce (scale: 0.95 → 1)

**BalanceView enhancements:**
- Animate balance amount changes with number counter effect
- Use AnimatePresence for balance entry additions/removals
- Stagger balance card animations similar to ExpenseList
- Loading state with skeleton that matches card structure

**Animation specs:**
- Spring physics: { type: 'spring', stiffness: 380, damping: 30 }
- Stagger delay: 50ms between items (feels responsive, not robotic)
- Max 5 staggered items (after that, instant to avoid long waits)

**Avoid:**
- Do NOT over-animate (too much motion is distracting)
- Do NOT slow down perceived performance (keep animations <300ms)
- Do NOT animate on every re-render (only mount/unmount/reorder)
</action>
  <verify>ExpenseList and BalanceView have smooth staggered animations, loading states polished</verify>
  <done>Lists animate smoothly on mount, loading states have shimmer effect, balance changes animated.</done>
</task>

<task type="auto">
  <name>Task 2: Polish form interactions and input feedback</name>
  <files>components/TagInput.tsx, components/ExpenseForm.tsx</files>
  <action>
Add micro-interactions to form inputs for better feedback:

**TagInput enhancements:**
- Tag addition: scale spring animation (scale: 0.8 → 1) when tag added
- Tag removal: exit animation (scale: 0.8, opacity: 0, x: -20) before removal
- Autocomplete dropdown: slide down animation with fade (y: -10 → 0, opacity: 0 → 1)
- Input focus: subtle border color transition (200ms ease)

**ExpenseForm enhancements:**
- Amount input: Highlight flash animation on validation (green border pulse for valid, red for invalid)
- Currency selector: Dropdown with staggered option animations
- Date picker: Smooth open/close animation
- Submit button: Loading state with spinner + "Saving..." text animation
- Success feedback: Checkmark animation with scale spring when expense saved

**Interaction polish:**
- All inputs: Focus ring with proper iOS blue color and smooth transition
- Error states: Shake animation (x: [-10, 10, -10, 10, 0]) when validation fails
- Success states: Brief green highlight that fades (300ms)

**Haptic simulation (visual only):**
- Button press: Quick scale to 0.95 on tap
- Error: Shake animation simulates haptic feedback
- Success: Slight bounce (scale: 1 → 1.05 → 1) simulates success haptic

**Avoid:**
- Do NOT add actual haptic feedback (requires device API, PWA limitation)
- Do NOT animate every keystroke (only state changes)
- Do NOT use long animations on form interactions (users want speed)
</action>
  <verify>Form inputs have smooth feedback, tag animations work, submit button shows loading state</verify>
  <done>Form interactions polished, visual feedback for all states, error/success animations added.</done>
</task>

<task type="auto">
  <name>Task 3: Refine navigation and bottom tab animations</name>
  <files>components/BottomNav.tsx</files>
  <action>
Polish BottomNav animations and add subtle enhancements:

**Current BottomNav:**
- Has whileTap scale animation on tabs
- Has layoutId="activeTab" indicator animation

**Enhancements:**
- Active tab indicator: Add glow effect (box-shadow with blur)
- Tab press: Reduce scale to 0.92 (slightly more pronounced)
- Tab icon: Add vertical bounce on activation (y: [0, -4, 0] spring)
- Badge notifications (if added later): Pulse animation ready
- Background blur: Ensure backdrop-blur-lg is properly applied with safe area

**Spring physics refinement:**
- Tab indicator: { type: 'spring', stiffness: 400, damping: 28 } (slightly bouncier)
- Icon bounce: { type: 'spring', stiffness: 500, damping: 15 } (quick, snappy)

**Dark mode polish:**
- Ensure backdrop blur works in dark mode
- Add subtle inner shadow at top of nav (separates from content)

**Keep:**
- All existing functionality
- Safe area padding
- Active state detection

**Result:**
BottomNav feels more responsive and playful, matching iOS native tab bars.
</action>
  <verify>BottomNav animations enhanced, tab switching feels smooth, dark mode looks polished</verify>
  <done>Navigation animations refined, bottom tabs feel more responsive and native.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Polished animations and micro-interactions across all components</what-built>
  <how-to-verify>
1. Run: npm run dev
2. Navigate through app, test all interactions:
   - **Lists**: Verify ExpenseList items stagger on load, smooth fade-in
   - **Balances**: Check BalanceView animations, balance changes animate
   - **Forms**: Add expense, verify input feedback, error shake, success animation
   - **Tags**: Add/remove tags, verify smooth animations
   - **Navigation**: Switch bottom tabs, verify icon bounce and indicator animation
   - **Loading**: Trigger loading states, verify shimmer effect looks good
3. Toggle dark mode (System Preferences): Verify smooth transitions
4. Try rapid interactions: Verify animations don't queue up or lag
5. Check on mobile viewport (responsive mode): Verify animations scale appropriately
6. Verify feels "native" and delightful, not janky or over-animated

Expected feel: Smooth, responsive, playful but not distracting. Every tap should feel satisfying.
  </how-to-verify>
  <resume-signal>Type "approved" if animations feel polished and native, or describe issues to refine</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] All list animations stagger smoothly
- [ ] Form interactions have proper feedback
- [ ] Navigation animations refined
- [ ] Loading states polished
- [ ] No animation jank or lag
- [ ] Dark mode transitions smooth
- [ ] User verification confirms native feel
</verification>

<success_criteria>
- All components have polished animations
- Micro-interactions feel responsive and delightful
- Loading states have shimmer effects
- Form feedback clear and immediate
- User verification confirms iOS-native quality
- No performance issues or animation conflicts
- Phase 10 complete: iOS-Native UX Layer fully implemented
</success_criteria>

<output>
After completion, create `.planning/phases/10-ios-native-ux-layer/10-05-SUMMARY.md`:

# Phase 10 Plan 5: Animation Polish Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `components/ExpenseList.tsx` - Description
- `components/BalanceView.tsx` - Description
- `components/TagInput.tsx` - Description
- `components/ExpenseForm.tsx` - Description
- `components/BottomNav.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 10 complete! iOS-Native UX Layer fully implemented:
- 10-01: Sheet modal component with drag gestures
- 10-02: Swipe-back navigation
- 10-03: iOS list components
- 10-04: Complete dark mode system
- 10-05: Polished animations throughout

Ready for Phase 11: Analytics, Export & Categories
</output>
