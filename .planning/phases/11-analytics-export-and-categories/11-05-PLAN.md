---
phase: 11-analytics-export-and-categories
plan: 05
type: execute
depends_on: ["11-04"]
files_modified: [app/analytics/page.tsx, components/SummaryCards.tsx]
---

<objective>
Integrate charts into analytics page with summary cards and complete the analytics dashboard.

Purpose: Provide a unified analytics experience with key metrics and visualizations.
Output: Complete analytics dashboard with summary cards, charts, and polished iOS-native UX.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-analytics-export-and-categories/11-03-SUMMARY.md
@.planning/phases/11-analytics-export-and-categories/11-04-SUMMARY.md
@app/analytics/page.tsx
@components/SpendingByCategory.tsx
@components/SpendingByPerson.tsx

**From 11-03:** Analytics page foundation, DateRangeSelector
**From 11-04:** SpendingByCategory, SpendingByPerson chart components
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SummaryCards component</name>
  <files>components/SummaryCards.tsx</files>
  <action>Create SummaryCards component showing 3 key metrics: 1) Total Spent (large number with currency), 2) Avg Per Day (calculated from total / days in range), 3) Most Expensive Category (name + amount + icon). Display as horizontal scrollable cards on mobile, 3-column grid on tablet+. Each card has icon (Lucide), label, value, and subtle background color (ios-blue-50, ios-green-50, ios-red-50 in light mode, darker variants in dark mode). Use Framer Motion stagger for card entrance animation. Props: expenses, dateRange. Calculate metrics using analytics utilities.</action>
  <verify>SummaryCards displays 3 metric cards, calculations correct, responsive layout, animations smooth, dark mode works</verify>
  <done>SummaryCards component with 3 key metrics, iOS-styled, animated</done>
</task>

<task type="auto">
  <name>Task 2: Integrate charts into analytics page</name>
  <files>app/analytics/page.tsx</files>
  <action>Update /analytics page to include: 1) DateRangeSelector at top, 2) SummaryCards below date selector, 3) SpendingByCategory chart in section with heading "Spending by Category", 4) SpendingByPerson chart in section with heading "Who Paid the Most". Use proper spacing between sections (space-y-6). Load expenses from getExpenses() on mount and filter by selected date range. Show loading skeleton while fetching expenses (use motion.div with pulse animation). Use standard page layout with safe areas. Ensure all components receive filtered expenses based on date range.</action>
  <verify>Analytics page displays all components in correct order, date range filtering updates all charts and cards, loading state shows, TypeScript compiles</verify>
  <done>Analytics page fully integrated with date filtering, charts, and summary cards</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete analytics dashboard with charts, summary cards, and date range filtering</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Navigate to /analytics via bottom navigation
    3. Verify DateRangeSelector displays all presets
    4. Test changing date range - all charts and cards should update
    5. Verify SummaryCards show correct metrics (total spent, avg/day, top category)
    6. Verify SpendingByCategory chart: pie chart displays by default, toggle to bar chart works
    7. Verify SpendingByPerson chart: bars sorted by amount, current user highlighted
    8. Test responsive layout on mobile viewport (375px width)
    9. Toggle dark mode - verify all charts, cards, and text readable
    10. Create expenses in different categories - verify charts update correctly
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any visual/functional issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All components integrated into analytics page
- [ ] Date range filtering updates all visualizations
- [ ] Charts display correctly with real expense data
- [ ] Summary cards show accurate calculations
- [ ] Loading states work
- [ ] Responsive on mobile and tablet
- [ ] Dark mode fully functional
- [ ] User verification checkpoint passed
</verification>

<success_criteria>

- All tasks completed
- Analytics dashboard fully functional
- Date filtering updates all components
- Charts and cards display correctly
- iOS-native UX polished
- User approval received
</success_criteria>

<output>
After completion, create `.planning/phases/11-analytics-export-and-categories/11-05-SUMMARY.md`
</output>
