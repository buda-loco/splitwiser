---
phase: 01-foundation-and-setup
plan: 01
type: execute
depends_on: []
files_modified: [package.json, next.config.ts, tailwind.config.ts, tsconfig.json, app/layout.tsx, app/page.tsx, app/globals.css]
---

<objective>
Initialize Next.js 15 project with TypeScript, Tailwind CSS, and iOS design tokens.

Purpose: Establish the foundational project structure and styling system that all features will build upon.
Output: Working Next.js app with TypeScript, Tailwind CSS configured with iOS design tokens, and initial app structure.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Tech Stack Decisions:**
- Next.js 15 with App Router (latest stable, React 19 RC support)
- TypeScript for type safety
- Tailwind CSS v3+ for styling
- iOS design tokens for native-feeling UX

**Key Constraints:**
- Must support PWA (standalone display mode)
- Must work on iOS Safari (primary target)
- Must follow iOS design conventions (-apple-system fonts, safe areas)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js 15 project with TypeScript and Tailwind</name>
  <files>package.json, next.config.ts, tailwind.config.ts, tsconfig.json, app/layout.tsx, app/page.tsx, app/globals.css</files>
  <action>
Run `npx create-next-app@latest . --typescript --tailwind --app --use-npm --no-src-dir` in current directory. This initializes Next.js 15 with:
- TypeScript enabled
- App Router (not pages router)
- Tailwind CSS pre-configured
- No src/ directory (keep flat structure)
- npm as package manager

Accept defaults for ESLint and import aliases (@/* pointing to root).

Verify creation:
- Check package.json contains next@15.x, react@19.x, tailwindcss@3.x
- Confirm next.config.ts exists (TypeScript config file)
- Confirm app/ directory structure with layout.tsx and page.tsx
- Confirm tailwind.config.ts and postcss.config.mjs exist
  </action>
  <verify>npm run dev starts successfully on localhost:3000, homepage renders "Get started by editing app/page.tsx"</verify>
  <done>Project initialized, dev server runs, default Next.js welcome page displays</done>
</task>

<task type="auto">
  <name>Task 2: Configure Tailwind with iOS design tokens</name>
  <files>tailwind.config.ts, app/globals.css</files>
  <action>
Extend tailwind.config.ts to add iOS-specific design tokens:

1. **Typography**: Add -apple-system font stack
2. **Safe Area Utilities**: Add safe-area-inset utilities for notched devices (env(safe-area-inset-top), etc.)
3. **iOS Colors**: Add iOS semantic colors (systemGray, systemBlue, etc.) following Apple HIG
4. **Spacing**: Use 4px base unit (iOS standard)

Configuration pattern:
```typescript
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: [
          "-apple-system",
          "BlinkMacSystemFont",
          "SF Pro Text",
          "Helvetica Neue",
          "sans-serif",
        ],
      },
      padding: {
        "safe-top": "env(safe-area-inset-top)",
        "safe-bottom": "env(safe-area-inset-bottom)",
        "safe-left": "env(safe-area-inset-left)",
        "safe-right": "env(safe-area-inset-right)",
      },
      colors: {
        ios: {
          blue: "#007AFF",
          green: "#34C759",
          red: "#FF3B30",
          gray: "#8E8E93",
          gray2: "#AEAEB2",
          gray3: "#C7C7CC",
          gray4: "#D1D1D6",
          gray5: "#E5E5EA",
          gray6: "#F2F2F7",
        },
      },
    },
  },
  plugins: [],
};
export default config;
```

In app/globals.css, add iOS-specific base styles:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
  }

  body {
    @apply bg-white text-gray-900;
  }

  @media (prefers-color-scheme: dark) {
    body {
      @apply bg-black text-white;
    }
  }
}
```

Do NOT install tailwindcss-safe-area plugin - we're using native env() approach for better control.
  </action>
  <verify>npm run dev still works, inspect computed styles show -apple-system font stack, safe area classes like pt-safe-top are available in intellisense</verify>
  <done>Tailwind configured with iOS font stack, safe area utilities, iOS color palette, and dark mode support</done>
</task>

<task type="auto">
  <name>Task 3: Create minimal app layout with iOS styling</name>
  <files>app/layout.tsx, app/page.tsx</files>
  <action>
Update app/layout.tsx to set up iOS-native viewport and metadata:

```typescript
import type { Metadata, Viewport } from "next";
import "./globals.css";

export const metadata: Metadata = {
  title: "Splitwiser",
  description: "Beautiful expense splitting for iOS",
};

export const viewport: Viewport = {
  width: "device-width",
  initialScale: 1,
  maximumScale: 1,
  userScalable: false, // iOS native feel
  viewportFit: "cover", // Safe area support
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body className="antialiased">
        {children}
      </body>
    </html>
  );
}
```

Update app/page.tsx to minimal welcome screen:

```typescript
export default function Home() {
  return (
    <main className="min-h-screen pt-safe-top pb-safe-bottom px-4">
      <div className="max-w-md mx-auto pt-16">
        <h1 className="text-3xl font-bold text-ios-blue mb-4">
          Splitwiser
        </h1>
        <p className="text-ios-gray">
          Beautiful expense splitting for iOS
        </p>
      </div>
    </main>
  );
}
```

This creates a minimal iOS-styled welcome screen that demonstrates:
- Safe area padding working
- iOS colors working
- iOS font stack working
- Viewport configuration for native feel
  </action>
  <verify>Visit localhost:3000, see "Splitwiser" header in iOS blue (#007AFF), text in iOS gray, layout respects safe areas (visible when inspecting in iOS simulator or real device)</verify>
  <done>App layout configured with iOS viewport settings, minimal home page demonstrates iOS styling working</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run dev` starts without errors
- [ ] App displays at localhost:3000 with iOS-styled content
- [ ] Tailwind classes compile (no CSS errors in console)
- [ ] iOS color classes work (text-ios-blue renders #007AFF)
- [ ] Safe area padding classes exist (pt-safe-top available)
- [ ] Dark mode CSS is present (@media prefers-color-scheme: dark)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Next.js 15 project initialized with TypeScript and App Router
- Tailwind CSS configured with iOS design tokens
- Dev server runs without errors
- Minimal iOS-styled welcome page renders
- Foundation ready for Supabase, PWA, and Framer Motion integration (subsequent plans)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-setup/01-01-SUMMARY.md`:

---
phase: 01-foundation-and-setup
plan: 01
completed: [YYYY-MM-DD]
subsystem: foundation
requires: []
provides: [next-js-15, typescript, tailwind-css, ios-design-tokens]
affects: [01-02, 01-03, 01-04, 01-05]
tags: [setup, next-js, tailwind, ios]
key-decisions:
  - "Next.js 15 with App Router as foundation"
  - "Tailwind native env() for safe areas (not plugin)"
  - "iOS design tokens in theme.extend for consistency"
key-files:
  - tailwind.config.ts
  - app/layout.tsx
  - app/globals.css
tech-stack:
  added: [next-js-15, typescript, tailwind-css]
  patterns: [app-router, ios-viewport-config, safe-area-utilities]
---

# Phase 1 Plan 1: Next.js Foundation with iOS Design Tokens

**Next.js 15 project initialized with TypeScript, Tailwind CSS, and iOS-native styling foundation.**

## Accomplishments

- Initialized Next.js 15 project with App Router and TypeScript
- Configured Tailwind CSS with iOS design tokens (colors, fonts, spacing)
- Added safe area utilities using native env() approach
- Created minimal iOS-styled layout demonstrating design system
- Established viewport configuration for native iOS feel

## Files Created/Modified

- `package.json` - Next.js 15, React 19 RC, Tailwind dependencies
- `next.config.ts` - TypeScript Next.js configuration
- `tailwind.config.ts` - iOS design tokens (colors, fonts, safe areas)
- `app/layout.tsx` - Root layout with iOS viewport and metadata
- `app/page.tsx` - Minimal welcome screen demonstrating iOS styling
- `app/globals.css` - Base styles with dark mode support

## Decisions Made

**Next.js 15 with App Router**: Latest stable version with React 19 RC support. App Router is the current standard, required for Server Components and modern patterns.

**Native env() for safe areas**: Using CSS `env(safe-area-inset-*)` directly in Tailwind config instead of tailwindcss-safe-area plugin. Provides better control and one less dependency.

**iOS design tokens in theme.extend**: Colors, typography, and spacing follow Apple Human Interface Guidelines. Creates consistent native feel across all components.

## Issues Encountered

None - standard Next.js initialization worked as expected.

## Next Phase Readiness

**Ready for parallel execution:**
- Plan 01-02 (Supabase) - Can proceed independently
- Plan 01-03 (PWA) - Can proceed independently
- Plan 01-04 (Framer Motion) - Can proceed independently

**Sequential dependency:**
- Plan 01-05 (Safe area padding) - Depends on Plan 01-04 (base layout structure)

## Next Step

Multiple plans ready for parallel execution. Run `/gsd:execute-phase 1` to execute all remaining plans with intelligent parallelization.
</output>
